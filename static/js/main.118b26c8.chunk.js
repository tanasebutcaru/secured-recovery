(this["webpackJsonpsecured-recovery"]=this["webpackJsonpsecured-recovery"]||[]).push([[0],{106:function(e,t,c){},108:function(e,t,c){},111:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c.n(r),a=c(45),s=c.n(a),i=(c(53),c(28)),o=c(4),u=c(9),l=c.n(u),j=c(13),d=c(12),h=c(3),b=c.n(h),p=c(7),O=c(14),x=c(36),y=c(46),f=c.n(y),m=c(27),v=function(e,t){return m.AES.encrypt(e,t).toString()},k=function(e,t,c){return"".concat(e,"/c").concat(t,"t").concat(c,"==")},g=function(e,t){for(var c=[],r=t<=0?1:t,n=Math.ceil(e.length/t),a=1,s=0;r>=a;a++,s+=n){var i=e.slice(s,s+n);c.push({data:k(i,a,r)})}return c};function C(e,t,c){return N.apply(this,arguments)}function N(){return N=Object(p.a)(b.a.mark((function e(t,c,r){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={error:!1,errorMsg:"",chunks:[]},a=v(t,c),g(a,r).map(function(){var e=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=n.chunks,e.t1=d.a,e.t2=Object(d.a)({},t),e.t3={},e.next=7,f.a.toDataURL(t.data);case 7:e.t4=e.sent,e.t5={qrcodeDataURL:e.t4},e.t6=(0,e.t1)(e.t2,e.t3,e.t5),e.t0.push.call(e.t0,e.t6),e.next=17;break;case 13:e.prev=13,e.t7=e.catch(0),n.error=!0,n.errorMsg=e.t7.message;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}c(106);var S=c(1);var w=function(){var e=Object(x.a)(),t=e.register,c=e.setValue,n=e.setFocus,a=e.handleSubmit,s=e.reset,i=Object(r.useState)(!1),o=Object(O.a)(i,2),u=o[0],h=o[1],y=Object(r.useState)(1),f=Object(O.a)(y,2),m=f[0],v=f[1],k=Object(r.useState)({error:!1,errorMsg:"",chunks:[]}),g=Object(O.a)(k,2),N=g[0],w=g[1],E=Object(r.useState)(!1),R=Object(O.a)(E,2),q=R[0],z=R[1],D=Object(r.useRef)([]),M=function(){var e=Object(p.a)(b.a.mark((function e(t,c){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=w,e.next=3,C(t.secret,t.encryptionKey,parseInt(t.encryptionChunks,10));case 3:e.t1=e.sent,(0,e.t0)(e.t1),z(!0),D.current.forEach((function(e){e.style.height="auto",e.style.height=e.scrollHeight+5+"px"}));case 7:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),F=function(){return h((function(e){return!e}))},L=function(){var e=Object(p.a)(b.a.mark((function e(t,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!q){e.next=4;break}e.t0=(n=t.startOverClean,z(!1),D.current=[],void(n&&(c("encryptionChunks",1),v(1),s()))),e.next=7;break;case 4:return e.next=6,M(t,r);case 6:e.t0=e.sent;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}var n}),e)})));return function(t,c){return e.apply(this,arguments)}}(),T=function(e,t){try{D.current[e].focus(),D.current[e].setSelectionRange(0,t)}catch(c){}};return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("form",{className:"encrypt-form",onSubmit:a(L),children:[Object(S.jsxs)("div",{className:"secret-field form-field",children:[Object(S.jsx)("label",{htmlFor:"secret",children:"The secret *:"}),Object(S.jsx)("textarea",Object(d.a)(Object(d.a)({id:"secret"},t("secret",{required:!0,disabled:q})),{},{rows:"10"}))]}),Object(S.jsxs)("div",{className:"encryption-settings-submit-group",children:[Object(S.jsxs)("div",{className:"encryption-chunks-field form-field",children:[Object(S.jsx)("label",{htmlFor:"encryptionChunks",children:"Split result in chunks:"}),Object(S.jsx)("input",Object(d.a)(Object(d.a)({id:"encryptionChunks"},t("encryptionChunks",{required:!0,valueAsNumber:!0,disabled:q})),{},{min:"1",max:"9",step:"1",type:"range",value:m,onChange:function(e){c("encryptionChunks",e.target.value),v(e.target.value),n("encryptionChunks")}})),Object(S.jsx)("span",{className:"encryption-chunks-value",children:m})]}),Object(S.jsxs)("div",{className:"encryption-key-field form-field",children:[Object(S.jsx)("label",{htmlFor:"encryptionKey",children:"Encryption key *:"}),Object(S.jsx)("input",Object(d.a)(Object(d.a)({id:"encryptionKey"},t("encryptionKey",{required:!0,disabled:q})),{},{type:u?"text":"password"})),u&&Object(S.jsx)(l.a,{path:j.f,size:1.2,onClick:F,title:"Hide encryption key"}),!u&&Object(S.jsx)(l.a,{path:j.e,size:1.2,onClick:F,title:"Show encryption key"})]}),Object(S.jsx)("button",{type:"submit",className:q?"form-start-over-btn":"form-submit-btn",children:q?"Start Over":"Encrypt Secret"}),q&&Object(S.jsxs)("div",{className:"encryption-startover-clean",children:[Object(S.jsx)("input",Object(d.a)(Object(d.a)({id:"startOverClean"},t("startOverClean",{required:!1})),{},{type:"checkbox"})),Object(S.jsx)("label",{htmlFor:"startOverClean",children:"Clean Start Over?"})]})]})]}),q&&Object(S.jsxs)("div",{className:"encrypted-secret",children:[Object(S.jsxs)("small",{className:"notice",children:[Object(S.jsx)(l.a,{path:j.b,size:1,title:"See result below"}),Object(S.jsx)("span",{children:"Encrypted Secret"}),Object(S.jsx)(l.a,{path:j.b,size:1,title:"See result below"})]}),N.error&&Object(S.jsxs)("div",{className:"encrypted-result-error",children:[Object(S.jsx)(l.a,{path:j.a,size:2,onClick:F,title:"Error while encrypting secret"}),Object(S.jsx)("span",{children:N.errorMsg})]}),N.chunks.length&&Object(S.jsx)("div",{className:"encrypted-result-success ".concat(1===N.chunks.length?"one-chunk":""),children:N.chunks.map((function(e,t){return Object(S.jsxs)("div",{className:"encrypted-result-chunk chunk-".concat(t+1),children:[Object(S.jsxs)("div",{className:"chunk-number",children:["Encrypted Secret | Chunk #",t+1]}),Object(S.jsx)("img",{className:"chunk-qrcode-img",src:e.qrcodeDataURL,alt:"QRCode Chunk #".concat(t+1)}),Object(S.jsxs)("div",{className:"chunk-operations",children:[Object(S.jsxs)("button",{className:"chunk-qrcode-download",type:"button",onClick:function(){return function(e,t){var c=document.createElement("a");c.href=t,c.setAttribute("download","encrypted-secret-chunk-".concat(e,"-qrcode.png")),c.click()}(t+1,e.qrcodeDataURL)},children:[Object(S.jsx)(l.a,{path:j.d,size:1,title:"Download"}),Object(S.jsxs)("span",{children:["Download QRCode #",t+1]})]}),Object(S.jsx)("div",{className:"chunk-ops-andor",children:"and/or"}),Object(S.jsx)("textarea",{className:"chunk-data",value:e.data,ref:function(e){return D.current[t+1]=e},onClick:function(){return T(t+1,e.data.length)},readOnly:!0}),Object(S.jsxs)("button",{className:"chunk-secret-copy",type:"button",onClick:function(){return function(e,t){var c="Could not copy encrypted secret chunk #".concat(e," to clipboard. Please try again or perform a manual copy!");try{navigator.clipboard.writeText(t).then((function(){return alert("Encrypted secret chunk #".concat(e," successfully copied to clipboard!"))})).catch((function(e){return alert(c)}))}catch(r){alert(c)}T(e,t.length)}(t+1,e.data)},children:[Object(S.jsx)(l.a,{path:j.c,size:1,title:"Copy"}),Object(S.jsxs)("span",{children:["Copy Secret #",t+1]})]})]})]},t)}))})]})]})};c(108);var E=function(){return Object(S.jsx)("h2",{children:"TODO: Decrypt Page"})};var R=function(){return Object(S.jsxs)(i.a,{children:[Object(S.jsxs)("header",{children:[Object(S.jsx)("div",{className:"app-name",children:"Secured Recovery"}),Object(S.jsx)("nav",{children:Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:Object(S.jsxs)(i.b,{to:"/encrypt",activeClassName:"is-active",exact:!0,children:[Object(S.jsx)(l.a,{path:j.h,size:1}),Object(S.jsx)("span",{children:"Encrypt"})]})}),Object(S.jsx)("li",{children:Object(S.jsxs)(i.b,{to:"/decrypt",activeClassName:"is-active",exact:!0,children:[Object(S.jsx)(l.a,{path:j.i,size:1}),Object(S.jsx)("span",{children:"Decrypt"})]})})]})})]}),Object(S.jsx)("main",{className:"content",children:Object(S.jsxs)(o.d,{children:[Object(S.jsx)(o.a,{exact:!0,from:"/",to:"/encrypt"}),Object(S.jsx)(o.b,{path:"/encrypt",children:Object(S.jsx)(w,{})}),Object(S.jsx)(o.b,{path:"/decrypt",children:Object(S.jsx)(E,{})})]})}),Object(S.jsx)("footer",{children:Object(S.jsxs)("small",{className:"copyright",children:[Object(S.jsxs)("span",{children:["\xa9 Tanase Butcaru / MIT License / Secured Recovery v","1.0.0-alpha.3"]}),Object(S.jsx)("a",{href:"https://github.com/tbutcaru/secured-recovery",target:"_blank",rel:"noreferrer",title:"Secured Recovery on GitHub",children:Object(S.jsx)(l.a,{path:j.g,size:1})})]})})]})};s.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(R,{})}),document.getElementById("root"))},53:function(e,t,c){},81:function(e,t){}},[[111,1,2]]]);
//# sourceMappingURL=main.118b26c8.chunk.js.map