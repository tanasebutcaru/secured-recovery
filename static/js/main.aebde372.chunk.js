(this["webpackJsonpsecured-recovery"]=this["webpackJsonpsecured-recovery"]||[]).push([[0],{106:function(e,t,c){},108:function(e,t,c){},111:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),a=c(45),s=c.n(a),i=(c(53),c(29)),o=c(5),u=c(9),l=c.n(u),j=c(10),d=c(4),b=c(2),h=c.n(b),p=c(6),O=c(11),x=c(27),v=c(46),y=c.n(v),f=c(28),m=function(e,t){return f.AES.encrypt(e,t).toString()},k=function(e,t,c){return"".concat(e,"/c").concat(t,"t").concat(c,"==")},C=function(e,t){for(var c=[],n=t<=0?1:t,r=Math.ceil(e.length/t),a=1,s=0;n>=a;a++,s+=r){var i=e.slice(s,s+r);c.push({data:k(i,a,n)})}return c};function g(e,t,c){return N.apply(this,arguments)}function N(){return N=Object(p.a)(h.a.mark((function e(t,c,n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={error:!1,errorMsg:"",chunks:[]},a=m(t,c),C(a,n).map(function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=r.chunks,e.t1=d.a,e.t2=Object(d.a)({},t),e.t3={},e.next=7,y.a.toDataURL(t.data);case 7:e.t4=e.sent,e.t5={qrcodeDataURL:e.t4},e.t6=(0,e.t1)(e.t2,e.t3,e.t5),e.t0.push.call(e.t0,e.t6),e.next=17;break;case 13:e.prev=13,e.t7=e.catch(0),r.error=!0,r.errorMsg=e.t7.message;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}var S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;e.style.height="auto",e.style.height=e.scrollHeight+t+"px"},w=(c(106),c(0));var q=function(){var e=Object(x.a)(),t=e.register,c=e.setValue,r=e.setFocus,a=e.handleSubmit,s=e.reset,i=Object(n.useState)(!1),o=Object(O.a)(i,2),u=o[0],b=o[1],v=Object(n.useState)(1),y=Object(O.a)(v,2),f=y[0],m=y[1],k=Object(n.useState)({error:!1,errorMsg:"",chunks:[]}),C=Object(O.a)(k,2),N=C[0],q=C[1],E=Object(n.useState)(!1),R=Object(O.a)(E,2),z=R[0],D=R[1],T=Object(n.useRef)([]),F=function(){var e=Object(p.a)(h.a.mark((function e(t,c){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=q,e.next=3,g(t.secret,t.encryptionKey,parseInt(t.encryptionChunks,10));case 3:e.t1=e.sent,(0,e.t0)(e.t1),D(!0),T.current.forEach((function(e){return S(e)}));case 7:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),M=function(){return b((function(e){return!e}))},L=function(){var e=Object(p.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!z){e.next=4;break}e.t0=(r=t.startOverClean,D(!1),T.current=[],void(r&&(c("encryptionChunks",1),m(1),s()))),e.next=7;break;case 4:return e.next=6,F(t,n);case 6:e.t0=e.sent;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}var r}),e)})));return function(t,c){return e.apply(this,arguments)}}(),K=function(e,t){try{T.current[e].focus(),T.current[e].setSelectionRange(0,t)}catch(c){}};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("form",{className:"encrypt-form",onSubmit:a(L),children:[Object(w.jsxs)("div",{className:"secret-field form-field",children:[Object(w.jsx)("label",{htmlFor:"secret",children:"The secret *:"}),Object(w.jsx)("textarea",Object(d.a)(Object(d.a)({id:"secret"},t("secret",{required:!0,disabled:z})),{},{rows:"10"}))]}),Object(w.jsxs)("div",{className:"encryption-settings-submit-group",children:[Object(w.jsxs)("div",{className:"encryption-chunks-field form-field",children:[Object(w.jsx)("label",{htmlFor:"encryptionChunks",children:"Split result in chunks:"}),Object(w.jsx)("input",Object(d.a)(Object(d.a)({id:"encryptionChunks"},t("encryptionChunks",{required:!0,valueAsNumber:!0,disabled:z})),{},{min:"1",max:"9",step:"1",type:"range",value:f,onChange:function(e){c("encryptionChunks",e.target.value),m(e.target.value),r("encryptionChunks")}})),Object(w.jsx)("span",{className:"encryption-chunks-value",children:f})]}),Object(w.jsxs)("div",{className:"encryption-key-field form-field",children:[Object(w.jsx)("label",{htmlFor:"encryptionKey",children:"Encryption key *:"}),Object(w.jsx)("input",Object(d.a)(Object(d.a)({id:"encryptionKey"},t("encryptionKey",{required:!0,disabled:z})),{},{type:u?"text":"password"})),u&&Object(w.jsx)(l.a,{path:j.f,size:1.2,onClick:M,title:"Hide encryption key"}),!u&&Object(w.jsx)(l.a,{path:j.e,size:1.2,onClick:M,title:"Show encryption key"})]}),Object(w.jsx)("button",{type:"submit",className:z?"form-start-over-btn":"form-submit-btn",children:z?"Start Over":"Encrypt Secret"}),z&&Object(w.jsxs)("div",{className:"encryption-startover-clean",children:[Object(w.jsx)("input",Object(d.a)(Object(d.a)({id:"startOverClean"},t("startOverClean",{required:!1})),{},{type:"checkbox"})),Object(w.jsx)("label",{htmlFor:"startOverClean",children:"Clean Start Over?"})]})]})]}),z&&Object(w.jsxs)("div",{className:"encrypted-secret",children:[Object(w.jsxs)("small",{className:"notice",children:[Object(w.jsx)(l.a,{path:j.b,size:1,title:"See result below"}),Object(w.jsx)("span",{children:"Encrypted Secret"}),Object(w.jsx)(l.a,{path:j.b,size:1,title:"See result below"})]}),N.error&&Object(w.jsxs)("div",{className:"encrypted-result-error",children:[Object(w.jsx)(l.a,{path:j.a,size:2,onClick:M,title:"Error while encrypting secret"}),Object(w.jsx)("span",{children:N.errorMsg})]}),N.chunks.length&&Object(w.jsx)("div",{className:"encrypted-result-success ".concat(1===N.chunks.length?"one-chunk":""),children:N.chunks.map((function(e,t){return Object(w.jsxs)("div",{className:"encrypted-result-chunk chunk-".concat(t+1),children:[Object(w.jsxs)("div",{className:"chunk-number",children:["Encrypted Secret | Chunk #",t+1]}),Object(w.jsx)("img",{className:"chunk-qrcode-img",src:e.qrcodeDataURL,alt:"QRCode Chunk #".concat(t+1)}),Object(w.jsxs)("div",{className:"chunk-operations",children:[Object(w.jsxs)("button",{className:"chunk-qrcode-download",type:"button",onClick:function(){return function(e,t){var c=document.createElement("a");c.href=t,c.setAttribute("download","encrypted-secret-chunk-".concat(e,"-qrcode.png")),c.click()}(t+1,e.qrcodeDataURL)},children:[Object(w.jsx)(l.a,{path:j.d,size:1,title:"Download"}),Object(w.jsxs)("span",{children:["Download QRCode #",t+1]})]}),Object(w.jsx)("div",{className:"chunk-ops-andor",children:"and/or"}),Object(w.jsx)("textarea",{className:"chunk-data",value:e.data,ref:function(e){return T.current[t+1]=e},onClick:function(){return K(t+1,e.data.length)},readOnly:!0}),Object(w.jsxs)("button",{className:"chunk-secret-copy",type:"button",onClick:function(){return function(e,t){var c="Could not copy encrypted secret chunk #".concat(e," to clipboard. Please try again or perform a manual copy!");try{navigator.clipboard.writeText(t).then((function(){return alert("Encrypted secret chunk #".concat(e," successfully copied to clipboard!"))})).catch((function(e){return alert(c)}))}catch(n){alert(c)}K(e,t.length)}(t+1,e.data)},children:[Object(w.jsx)(l.a,{path:j.c,size:1,title:"Copy"}),Object(w.jsxs)("span",{children:["Copy Text #",t+1]})]})]})]},t)}))})]})]})},E=c(15),R=(c(108),1),z=2;var D=function(){var e=Object(x.a)(),t=e.register,c=e.unregister,r=e.handleSubmit,a=(e.reset,Object(n.useState)({})),s=Object(O.a)(a,2),i=s[0],o=s[1],u=Object(n.useState)({}),b=Object(O.a)(u,2),v=b[0],y=(b[1],Object(n.useState)(!1)),f=Object(O.a)(y,2),m=f[0],k=(f[1],function(e,t){var n;if((null===(n=i[e])||void 0===n?void 0:n.input)!==t){var r=t===z?["qrcodeChunk".concat(e)]:["dataChunk".concat(e)];c(r),o((function(c){return Object(d.a)(Object(d.a)({},c),{},Object(E.a)({},e,Object(d.a)(Object(d.a)({},c[e]),{},{input:t})))}))}}),C=function(){var e=Object(p.a)(h.a.mark((function e(t,c){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("decrypt form dataa ---- ",t);case 1:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}();return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("form",{className:"decrypt-form",onSubmit:r(C),children:[function(e){var c,n,r,a,s=(null===(c=i[e])||void 0===c?void 0:c.input)===R,o=(null===(n=i[e])||void 0===n?void 0:n.input)===z,u=s||o,b=(null===(r=i[e])||void 0===r?void 0:r.chunkStatsCurrent)||1,h=(null===(a=i[e])||void 0===a?void 0:a.chunkStatsTotal)||"?",p=1===h||"?"===h;return Object(w.jsxs)("div",{className:"encrypted-secret-chunk ".concat(p?"one-chunk":""),children:[Object(w.jsxs)("div",{className:"chunk-label",children:["Encrypted secret | Chunk #",e]}),Object(w.jsxs)("div",{className:"chunk-input-type",children:[Object(w.jsxs)("button",{type:"button",className:"qrcode-input-type ".concat(s?"active":""),onClick:function(){return k(e,R)},children:[Object(w.jsx)(l.a,{path:j.j,size:3,title:"Encrypted Secret - QRCode"}),Object(w.jsxs)("span",{children:["QRCode #",e]})]}),Object(w.jsxs)("button",{type:"button",className:"data-input-type ".concat(o?"active":""),onClick:function(){return k(e,z)},children:[Object(w.jsx)(l.a,{path:j.k,size:3,title:"Encrypted Secret - Text"}),Object(w.jsxs)("span",{children:["Text #",e]})]})]}),s&&Object(w.jsxs)("div",{className:"chunk-input-view qrcode",children:[Object(w.jsx)("button",{type:"button",children:"remove qrcode selection"}),Object(w.jsx)("input",Object(d.a)({type:"file",value:v["qrcodeChunk".concat(e)]},t("qrcodeChunk".concat(e),{required:!0,disabled:m})))]}),o&&Object(w.jsx)("div",{className:"chunk-input-view data",children:Object(w.jsx)("textarea",Object(d.a)(Object(d.a)({},t("dataChunk".concat(e),{required:!0,disabled:m})),{},{rows:"10"}))}),u&&Object(w.jsxs)("div",{className:"chunk-stats",children:[b," / ",h]})]})}(1),"---- TODO: dynamic fields based on first chunk.",Object(w.jsx)("button",{type:"submit",className:m?"form-start-over-btn":"form-submit-btn",children:m?"Start Over":"Decrypt Secret"}),m&&Object(w.jsxs)("div",{className:"decryption-startover-clean",children:[Object(w.jsx)("input",Object(d.a)(Object(d.a)({id:"startOverClean"},t("startOverClean",{required:!1})),{},{type:"checkbox"})),Object(w.jsx)("label",{htmlFor:"startOverClean",children:"Clean Start Over?"})]})]})})};var T=function(){return Object(w.jsxs)(i.a,{children:[Object(w.jsxs)("header",{children:[Object(w.jsx)("div",{className:"app-name",children:"Secured Recovery"}),Object(w.jsx)("nav",{children:Object(w.jsxs)("ul",{children:[Object(w.jsx)("li",{children:Object(w.jsxs)(i.b,{to:"/encrypt",activeClassName:"is-active",exact:!0,children:[Object(w.jsx)(l.a,{path:j.h,size:1}),Object(w.jsx)("span",{children:"Encrypt"})]})}),Object(w.jsx)("li",{children:Object(w.jsxs)(i.b,{to:"/decrypt",activeClassName:"is-active",exact:!0,children:[Object(w.jsx)(l.a,{path:j.i,size:1}),Object(w.jsx)("span",{children:"Decrypt"})]})})]})})]}),Object(w.jsx)("main",{className:"content",children:Object(w.jsxs)(o.d,{children:[Object(w.jsx)(o.a,{exact:!0,from:"/",to:"/encrypt"}),Object(w.jsx)(o.b,{path:"/encrypt",children:Object(w.jsx)(q,{})}),Object(w.jsx)(o.b,{path:"/decrypt",children:Object(w.jsx)(D,{})})]})}),Object(w.jsx)("footer",{children:Object(w.jsxs)("small",{className:"copyright",children:[Object(w.jsxs)("span",{children:["\xa9 Tanase Butcaru / MIT License / Secured Recovery v","1.0.0-alpha.4"]}),Object(w.jsx)("a",{href:"https://github.com/tbutcaru/secured-recovery",target:"_blank",rel:"noreferrer",title:"Secured Recovery on GitHub",children:Object(w.jsx)(l.a,{path:j.g,size:1})})]})})]})};s.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(T,{})}),document.getElementById("root"))},53:function(e,t,c){},81:function(e,t){}},[[111,1,2]]]);
//# sourceMappingURL=main.aebde372.chunk.js.map